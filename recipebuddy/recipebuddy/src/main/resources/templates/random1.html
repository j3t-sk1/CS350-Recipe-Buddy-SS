<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>RecipeBuddy</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
    <link href="img/favicon.ico" rel="icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&amp;family=Open+Sans:wght@400;500;600&amp;display=swap"
      rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Gentium+Book+Basic:wght@400;700&family=Lato:wght@400;700&display=swap"
      rel="stylesheet">
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet">
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      rel="stylesheet">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
      rel="stylesheet">
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous">
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">


    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <main id="page">
      <nav>
      </nav>
      <header>
        <div class="header_info">
          <div class="header_bar">
            <h1 class="small">RecipeBuddy</h1>
            <div class="search">
              <form>
                <input type="text" class="searching" name="search"
                  placeholder="Search" maxlength="100"/>
                <div class="icon_search">
                  <a href="search"><img src="icons\search.svg" alt="search"
                      width="24" height="24" class="icon_search"/></a>
                </div>
              </form>
            </div>

            <a href="adding-recipe"><img src ="icons\plus-square.svg" class="b_add" alt="add" width="40" height="40"/></a>
            <a href="editing-recipe"><img src ="icons\pencil-square.svg" class="b_add" alt="edit" width="43" height="43"/></a>
            <a href="delete2"><img src ="icons\trash3-fill.svg" class="b_delete" alt="delete" width="40" height="40"/></a>
          </header>
          <article><!-- page content -->
            <div class="row no-gutters">
              <div class="col-md-1 no-gutters">
                <div class="leftside">
                  <div class="left_1">
                    <div class="timer">
                      <script>
                        class Timer {
                          constructor(root) {
                            root.innerHTML = Timer.getHTML();
      
                            this.el = {
                              hours: root.querySelector(".timer__part--hours"),
                              minutes: root.querySelector(".timer__part--minutes"),
                              seconds: root.querySelector(".timer__part--seconds"),
                              control: root.querySelector(".timer__btn--control"),
                              reset: root.querySelector(".timer__btn--reset")
                            };
      
                            this.interval = null;
                            this.remainingSeconds = 0;
      
                            // // Check if a timer was previously started and if so, resume it
                            const timerStart = parseInt(localStorage.getItem('timerStart'));
                            const remainingTime = parseInt(localStorage.getItem('remainingTime'));
                            if (timerStart && remainingTime) {
                              const elapsedSeconds = Math.floor((Date.now() - timerStart) / 1000);
                              this.remainingSeconds = Math.max(remainingTime - elapsedSeconds, 0);
                              this.updateInterfaceTime();
                              this.start();
                            }
                            this.el.control.addEventListener("click", () => {
                              if (this.interval === null) {
                                this.start();
                              } else {
                                this.stop();
                              }
                            });
                            this.el.reset.addEventListener("click", () => {
                              const inputHours = prompt("Enter number of hours:");
                              const inputMinutes = prompt("Enter number of minutes:");
      
                              const totalSeconds = inputHours * 3600 + inputMinutes * 60;
      
                              if (!isNaN(inputHours) && !isNaN(inputMinutes) && inputHours >= 0 && inputMinutes >= 0) {
                                this.stop();
                                this.remainingSeconds = totalSeconds;
                                this.updateInterfaceTime();
                                localStorage.setItem("remainingSeconds", this.remainingSeconds.toString());
                              }
                            });
                            // Store the timer in localStorage when the user leaves the page
                            window.addEventListener('beforeunload', () => {
                              localStorage.setItem('timerStart', Date.now());
                              localStorage.setItem('remainingTime', this.remainingSeconds);
                            });
      
                          }
                          updateInterfaceTime() {
      
                            const hours = Math.floor(this.remainingSeconds / 3600);
                            const minutes = Math.floor((this.remainingSeconds % 3600) / 60);
                            const seconds = this.remainingSeconds % 60;
      
                            this.el.hours.textContent = hours.toString().padStart(2, "0");
                            this.el.minutes.textContent = minutes.toString().padStart(2, "0");
                            this.el.seconds.textContent = seconds.toString().padStart(2, "0");
                          }
                          updateInterfaceControls() {
                            if (this.interval === null) {
                              this.el.control.innerHTML = `<span class="material-icons">play_arrow</span>`;
                              this.el.control.classList.add("timer__btn--start");
                              this.el.control.classList.remove("timer__btn--stop");
                            } else {
                              this.el.control.innerHTML = `<span class="material-icons">pause</span>`;
                              this.el.control.classList.add("timer__btn--stop");
                              this.el.control.classList.remove("timer__btn--start");
                            }
                          }
                          start() {
                            if (this.remainingSeconds === 0) return;
      
                            this.interval = setInterval(() => {
                              this.remainingSeconds--;
                              this.updateInterfaceTime();
      
                              if (this.remainingSeconds === 0) {
                                this.stop();
                              }
                            }, 1000);
                            this.updateInterfaceControls();
                          }
                          stop() {
                            clearInterval(this.interval);
      
                            this.interval = null;
      
                            this.updateInterfaceControls();
                          }
                          static getHTML() {
                            return `
                            <span class="timer__part timer__part--hours">00</span>
                            <span class="timer__part">:</span>
                            <span class="timer__part timer__part--minutes">00</span>
                            <span class="timer__part">:</span>
                            <span class="timer__part timer__part--seconds">00</span>
                            <button type="button" class="timer__btn timer__btn--control timer__btn--start">
                              <span class="material-icons">play_arrow</span>
                            </button>
                            <button type="button" class="timer__btn timer__btn--reset">
                              <span class="material-icons">timer</span>
                            </button>
                          `;
                          }
                        }
      
                        new Timer(
                          document.querySelector(".timer")
                        );
                      </script>
                      <div id="timer"></div>
                    </div>
                  </div>
                  <div class="left_2">
                    <button id="home" class="b_home">
                      <a width="100px" height="100px" alt="home"
                        href="index">
                        <img src="icons\house-fill.svg" width="100px"
                          height="100px">
                      </a>
                    </button>

                    <button id="profile" class="b_profile">
                      <a width="100px" height="100px" alt="profile"
                        href="profile">
                        <img src="icons\person-circle.svg" width="100px"
                          height="100px">
                      </a>
                    </button>

                    <button id="settings" class="b_settings">
                      <a width="100px" height="100px" alt="home"
                        href="settings">
                        <img src="icons\gear-fill.svg" width="100px"
                          height="100px">
                      </a>
                    </button>
                  </div>

                </div>
              </div>
              <div class="col-md-11 no-gutters">
                <div class="rightside">
                  <div class="main_page">

                    <p class="favorite" style="color:rgb(231, 228, 28)" th:text ="${name}"> 
                    </p>
                    <div class="recipe-box">
                      <div>
                        <img class="picpic" th:text ="${pic}">
                      </div>
                      <div class="f1-ingredients">
                        <p class="subtitles">
                          Ingredients:
                        </p>
                        <p th:text = ${ingredients}>
                        </p>
                      </div>
                      <div class="f1-utensils">
                        <p class="subtitles">
                          Utensils:
                        </p>
                        <p th:text = ${utensils}>
                        </p>
                      </div>
                      <div class="f1-oventemp">
                        <p class="subtitles">
                          Oven/Stove Temp:
                        </p>
                        <p th:text = ${temp}>
                        </p>
                      </div>
                      <div class="f1-servsize">
                        <p class="subtitles">
                          Serving Size:
                        </p>
                        <p th:text = "${serveSize}">
                        </p>
                      </div>
                      <div class="f1-instructs">
                        <p class="subtitles">
                          Instructions:
                        </p>
                        <p th:text = "${instructions}">
                        </p>
                      </div>
                      <div class="f1-comments">
                        <p class="subtitles">
                          Comments:
                        </p>
                        <p>
                          User-6182:<br>
                          <span class="indent">This is a coooool recipe!!!</span><br>
                          User-6371:<br>
                          <span class="indent">&#128293;&#128293;&#128293;Never cook this again&#128293;&#128293;&#128293;</span><br>
                          User-2123:<br>
                          <span class="indent">Didn't know that you could make pancakes at home. WOW</span><br>
                          User-7772:<br>
                          <span class="indent">This isn't a hamburger recipe 1/10</span><br>
                          User-1748:<br>
                          <span class="indent">Lovely!</span><br>
                        </p>
                      </div>
                      <input type="text" class="times" name="timez"
                       placeholder="Times Cooked">
                      <button class="save">
                        Save
                      </button>

                    </div>
                    


                    
                  
                  </div>
                </div>
              </div>

              <footer>
                <p>&copy; 2023 Shanghai Shark</p>
              </footer>
            </article>
          </main>
        </div>
        <script src="js/page.js"></script>
      </body>
    </html>